#!/usr/bin/env python3
#
# Author: Stefan Haller <stefan.haller@iwr.uni-heidelberg.de>

from collections import namedtuple

import exercise_1 as student


Node = namedtuple('Node', 'costs')
Edge = namedtuple('Edge', 'left right costs')

nodes = [Node(costs=[-9.9949, -0.3357, 9.3188]),
         Node(costs=[-6.4065, 4.0542, -4.7682]),
         Node(costs=[-5.1436, 5.7637, 5.2923]),
         Node(costs=[-4.9729, 2.6955, 6.6717]),
         Node(costs=[6.8182, 9.4537, 7.2202])]

edges = [Edge(left=0, right=1, costs={(0, 0): -9.0686, (0, 1): -0.7527, (0, 2): -1.579, (1, 0): -0.0677, (1, 1): -6.1557, (1, 2): -6.322, (2, 0): -6.8471, (2, 1): -1.4362, (2, 2): -9.9697}),
         Edge(left=0, right=2, costs={(0, 0): -0.0733, (0, 1): 3.9354, (0, 2): 9.4755, (1, 0): -4.7119, (1, 1): -7.0812, (1, 2): 0.5491, (2, 0): -8.7111, (2, 1): 8.8551, (2, 2): 6.5334}),
         Edge(left=0, right=3, costs={(0, 0): 7.1611, (0, 1): 2.8614, (0, 2): -3.3896, (1, 0): 2.7045, (1, 1): -0.7623, (1, 2): -0.9951, (2, 0): 0.9628, (2, 1): 7.6537, (2, 2): 1.3822}),
         Edge(left=0, right=4, costs={(0, 0): 3.0104, (0, 1): 6.6177, (0, 2): 7.9839, (1, 0): 4.1886, (1, 1): 2.9549, (1, 2): -7.6075, (2, 0): -2.0322, (2, 1): -0.8719, (2, 2): -0.3262}),
         Edge(left=1, right=2, costs={(0, 0): 1.3114, (0, 1): -0.9773, (0, 2): -0.5822, (1, 0): -9.6414, (1, 1): 8.0713, (1, 2): -6.6483, (2, 0): 4.0649, (2, 1): -7.0164, (2, 2): -8.8521}),
         Edge(left=1, right=3, costs={(0, 0): 2.5054, (0, 1): 0.9407, (0, 2): 5.2828, (1, 0): -4.9567, (1, 1): 8.8586, (1, 2): -6.4744, (2, 0): -7.301, (2, 1): 6.4401, (2, 2): -0.7746}),
         Edge(left=1, right=4, costs={(0, 0): 3.0709, (0, 1): -1.7006, (0, 2): -5.7446, (1, 0): -3.7907, (1, 1): -2.8368, (1, 2): 5.0167, (2, 0): -1.6846, (2, 1): -4.9487, (2, 2): -9.2569}),
         Edge(left=2, right=3, costs={(0, 0): -1.1311, (0, 1): -1.7322, (0, 2): 9.8333, (1, 0): -5.0333, (1, 1): 7.1271, (1, 2): 4.9688, (2, 0): 7.9051, (2, 1): -7.9105, (2, 2): -7.8771}),
         Edge(left=2, right=4, costs={(0, 0): 4.2153, (0, 1): 2.9786, (0, 2): 6.4274, (1, 0): -3.1406, (1, 1): -4.3503, (1, 2): 1.9612, (2, 0): -4.4684, (2, 1): 5.9962, (2, 2): 0.6998}),
         Edge(left=3, right=4, costs={(0, 0): -9.3588, (0, 1): 7.5095, (0, 2): -8.6337, (1, 0): -2.1686, (1, 1): -8.6614, (1, 2): -7.4721, (2, 0): 2.6431, (2, 1): 8.4858, (2, 2): -1.1791})]

ground_truth = {(0, 0, 0, 0, 0): -18.057,
                (0, 0, 0, 0, 1): -0.9541,
                (0, 0, 0, 0, 2): -18.5598,
                (0, 0, 0, 1, 0): -9.6639,
                (0, 0, 0, 1, 1): -15.9221,
                (0, 0, 0, 1, 2): -16.1953,
                (0, 0, 0, 2, 0): 8.7806,
                (0, 0, 0, 2, 1): 14.8579,
                (0, 0, 0, 2, 2): 3.7305,
                (0, 0, 1, 0, 0): -16.6878,
                (0, 0, 1, 0, 1): 0.4421,
                (0, 0, 1, 0, 2): -14.3009,
                (0, 0, 1, 1, 0): 4.4668,
                (0, 0, 1, 1, 1): -1.7644,
                (0, 0, 1, 1, 2): 0.8251,
                (0, 0, 1, 2, 0): 9.1875,
                (0, 0, 1, 2, 1): 15.2918,
                (0, 0, 1, 2, 2): 7.0271,
                (0, 0, 2, 0, 0): 0.3866,
                (0, 0, 2, 0, 1): 29.1908,
                (0, 0, 2, 0, 2): 2.8399,
                (0, 0, 2, 1, 0): -6.4348,
                (0, 0, 2, 1, 1): -0.9917,
                (0, 0, 2, 1, 2): -10.0101,
                (0, 0, 2, 2, 0): 0.4776,
                (0, 0, 2, 2, 1): 18.2562,
                (0, 0, 2, 2, 2): -1.6164,
                (0, 1, 0, 0, 0): -24.5569,
                (0, 1, 0, 0, 1): -1.7286,
                (0, 1, 0, 0, 2): -7.4368,
                (0, 1, 0, 1, 0): -0.7838,
                (0, 1, 0, 1, 1): -1.3166,
                (0, 1, 0, 1, 2): 10.3077,
                (0, 1, 0, 2, 0): -2.0144,
                (0, 1, 0, 2, 1): 9.7883,
                (0, 1, 0, 2, 2): 10.5584,
                (0, 1, 1, 0, 0): -3.1863,
                (0, 1, 1, 0, 1): 19.669,
                (0, 1, 1, 0, 2): 16.8235,
                (0, 1, 1, 1, 0): 33.3483,
                (0, 1, 1, 1, 1): 32.8425,
                (0, 1, 1, 1, 2): 47.3295,
                (0, 1, 1, 2, 0): 18.3939,
                (0, 1, 1, 2, 1): 30.2236,
                (0, 1, 1, 2, 2): 33.8564,
                (0, 1, 2, 0, 0): -1.2266,
                (0, 1, 2, 0, 1): 33.303,
                (0, 1, 2, 0, 2): 18.8496,
                (0, 1, 2, 1, 0): 7.332,
                (0, 1, 2, 1, 1): 18.5005,
                (0, 1, 2, 1, 2): 21.3796,
                (0, 1, 2, 2, 0): -5.4307,
                (0, 1, 2, 2, 1): 18.0733,
                (0, 1, 2, 2, 2): 10.0982,
                (0, 2, 0, 0, 0): -20.7375,
                (0, 2, 0, 0, 1): -2.1272,
                (0, 2, 0, 0, 2): -19.9971,
                (0, 2, 0, 1, 0): 2.9614,
                (0, 2, 0, 1, 1): -1.7894,
                (0, 2, 0, 1, 2): -2.3268,
                (0, 2, 0, 2, 0): 9.8491,
                (0, 2, 0, 2, 1): 17.4338,
                (0, 2, 0, 2, 2): 6.0422,
                (0, 2, 1, 0, 0): -28.1609,
                (0, 2, 1, 0, 1): -9.5236,
                (0, 2, 1, 0, 2): -24.5308,
                (0, 2, 1, 1, 0): 8.2995,
                (0, 2, 1, 1, 1): 3.5757,
                (0, 2, 1, 1, 2): 5.901,
                (0, 2, 1, 2, 0): 1.4634,
                (0, 2, 1, 2, 1): 9.0751,
                (0, 2, 1, 2, 2): 0.5462,
                (0, 2, 2, 0, 0): -13.3173,
                (0, 2, 2, 0, 1): 16.9943,
                (0, 2, 2, 0, 2): -9.6208,
                (0, 2, 2, 1, 0): -4.8329,
                (0, 2, 2, 1, 1): 2.1176,
                (0, 2, 2, 1, 2): -7.165,
                (0, 2, 2, 2, 0): -9.4773,
                (0, 2, 2, 2, 1): 9.8087,
                (0, 2, 2, 2, 2): -10.3281,
                (1, 0, 0, 0, 0): -7.3139,
                (1, 0, 0, 0, 1): 4.948,
                (1, 0, 0, 0, 2): -24.5863,
                (1, 0, 0, 1, 0): 1.9121,
                (1, 0, 0, 1, 1): -9.1871,
                (1, 0, 0, 1, 2): -21.3889,
                (1, 0, 0, 2, 0): 26.3748,
                (1, 0, 0, 2, 1): 27.6111,
                (1, 0, 0, 2, 2): 4.5551,
                (1, 0, 1, 0, 0): -12.3227,
                (1, 0, 1, 0, 1): -0.0338,
                (1, 0, 1, 0, 2): -26.7054,
                (1, 0, 1, 1, 0): 9.6648,
                (1, 0, 1, 1, 1): -1.4074,
                (1, 0, 1, 1, 2): -10.7465,
                (1, 0, 1, 2, 0): 20.4037,
                (1, 0, 1, 2, 1): 21.667,
                (1, 0, 1, 2, 2): 1.4737,
                (1, 0, 2, 0, 0): 6.8419,
                (1, 0, 2, 0, 1): 30.8051,
                (1, 0, 2, 0, 2): -7.4744,
                (1, 0, 2, 1, 0): 0.8534,
                (1, 0, 2, 1, 1): 1.4555,
                (1, 0, 2, 1, 2): -19.4915,
                (1, 0, 2, 2, 0): 13.784,
                (1, 0, 2, 2, 1): 26.7216,
                (1, 0, 2, 2, 2): -5.0796,
                (1, 1, 0, 0, 0): -28.2177,
                (1, 1, 0, 0, 1): -10.2304,
                (1, 1, 0, 0, 2): -27.8672,
                (1, 1, 0, 1, 0): -3.6117,
                (1, 1, 0, 1, 1): -8.9855,
                (1, 1, 0, 1, 2): -9.2898,
                (1, 1, 0, 2, 0): 1.1759,
                (1, 1, 0, 2, 1): 8.1376,
                (1, 1, 0, 2, 2): -3.0209,
                (1, 1, 1, 0, 0): -13.2251,
                (1, 1, 1, 0, 1): 4.7892,
                (1, 1, 1, 0, 2): -9.9849,
                (1, 1, 1, 1, 0): 24.1424,
                (1, 1, 1, 1, 1): 18.7956,
                (1, 1, 1, 1, 2): 21.354,
                (1, 1, 1, 2, 0): 15.2062,
                (1, 1, 1, 2, 1): 22.1949,
                (1, 1, 1, 2, 2): 13.8991,
                (1, 1, 2, 0, 0): -9.1752,
                (1, 1, 2, 0, 1): 20.5134,
                (1, 1, 2, 0, 2): -5.8686,
                (1, 1, 2, 1, 0): 0.2163,
                (1, 1, 2, 1, 1): 6.5438,
                (1, 1, 2, 1, 2): -2.5057,
                (1, 1, 2, 2, 0): -6.5282,
                (1, 1, 2, 2, 1): 12.1348,
                (1, 1, 2, 2, 2): -7.7689,
                (1, 2, 0, 0, 0): -23.7383,
                (1, 2, 0, 0, 1): -9.969,
                (1, 2, 0, 0, 2): -39.7675,
                (1, 2, 0, 1, 0): 0.7935,
                (1, 2, 0, 1, 1): -8.7983,
                (1, 2, 0, 1, 2): -21.2643,
                (1, 2, 0, 2, 0): 13.6994,
                (1, 2, 0, 2, 1): 16.4431,
                (1, 2, 0, 2, 2): -6.8771,
                (1, 2, 1, 0, 0): -37.5397,
                (1, 2, 1, 0, 1): -23.7434,
                (1, 2, 1, 0, 2): -50.6792,
                (1, 2, 1, 1, 0): -0.2464,
                (1, 2, 1, 1, 1): -9.8112,
                (1, 2, 1, 1, 2): -19.4145,
                (1, 2, 1, 2, 0): -1.0643,
                (1, 2, 1, 2, 1): 1.7064,
                (1, 2, 1, 2, 2): -18.7511,
                (1, 2, 2, 0, 0): -20.6059,
                (1, 2, 2, 0, 1): 4.8647,
                (1, 2, 2, 0, 2): -33.679,
                (1, 2, 2, 1, 0): -11.2886,
                (1, 2, 2, 1, 1): -9.1791,
                (1, 2, 2, 1, 2): -30.3903,
                (1, 2, 2, 2, 0): -9.9148,
                (1, 2, 2, 2, 1): 4.5302,
                (1, 2, 2, 2, 2): -27.5352,
                (2, 0, 0, 0, 0): -16.4005,
                (2, 0, 0, 0, 1): -1.7446,
                (2, 0, 0, 0, 2): -20.1708,
                (2, 0, 0, 1, 0): 2.9832,
                (2, 0, 0, 1, 1): -5.722,
                (2, 0, 0, 1, 2): -6.8157,
                (2, 0, 0, 2, 0): 21.4072,
                (2, 0, 0, 2, 1): 25.0375,
                (2, 0, 0, 2, 2): 13.0896,
                (2, 0, 1, 0, 0): -1.4738,
                (2, 0, 1, 0, 1): 13.2091,
                (2, 0, 1, 0, 2): -2.3544,
                (2, 0, 1, 1, 0): 30.6714,
                (2, 0, 1, 1, 1): 21.9932,
                (2, 0, 1, 1, 2): 23.7622,
                (2, 0, 1, 2, 0): 35.3716,
                (2, 0, 1, 2, 1): 39.0289,
                (2, 0, 1, 2, 2): 29.9437,
                (2, 0, 2, 0, 0): 7.7388,
                (2, 0, 2, 0, 1): 34.096,
                (2, 0, 2, 0, 2): 6.9246,
                (2, 0, 2, 1, 0): 11.908,
                (2, 0, 2, 1, 1): 14.9041,
                (2, 0, 2, 1, 2): 5.0652,
                (2, 0, 2, 2, 0): 18.7999,
                (2, 0, 2, 2, 1): 34.1315,
                (2, 0, 2, 2, 2): 13.4384,
                (2, 1, 0, 0, 0): -25.8054,
                (2, 1, 0, 0, 1): -5.4241,
                (2, 1, 0, 0, 2): -11.9528,
                (2, 1, 0, 1, 0): 8.9583,
                (2, 1, 0, 1, 1): 5.9785,
                (2, 1, 0, 1, 2): 16.7823,
                (2, 1, 0, 2, 0): 7.7072,
                (2, 1, 0, 2, 1): 17.0629,
                (2, 1, 0, 2, 2): 17.0125,
                (2, 1, 1, 0, 0): 9.1227,
                (2, 1, 1, 0, 1): 29.531,
                (2, 1, 1, 0, 2): 25.865,
                (2, 1, 1, 1, 0): 56.6479,
                (2, 1, 1, 1, 1): 53.6951,
                (2, 1, 1, 1, 2): 67.3616,
                (2, 1, 1, 2, 0): 41.673,
                (2, 1, 1, 2, 1): 51.0557,
                (2, 1, 1, 2, 2): 53.868,
                (2, 1, 2, 0, 0): 3.2206,
                (2, 1, 2, 0, 1): 35.3032,
                (2, 1, 2, 0, 2): 20.0293,
                (2, 1, 2, 1, 0): 22.7698,
                (2, 1, 2, 1, 1): 31.4913,
                (2, 1, 2, 1, 2): 33.5499,
                (2, 1, 2, 2, 0): 9.9866,
                (2, 1, 2, 2, 1): 31.0436,
                (2, 1, 2, 2, 2): 22.248,
                (2, 2, 0, 0, 0): -29.6932,
                (2, 2, 0, 0, 1): -13.5299,
                (2, 2, 0, 0, 2): -32.2203,
                (2, 2, 0, 1, 0): 4.9963,
                (2, 2, 0, 1, 1): -2.2015,
                (2, 2, 0, 1, 2): -3.5594,
                (2, 2, 0, 2, 0): 11.8635,
                (2, 2, 0, 2, 1): 17.0012,
                (2, 2, 0, 2, 2): 4.7891,
                (2, 2, 1, 0, 0): -23.5591,
                (2, 2, 1, 0, 1): -7.3688,
                (2, 2, 1, 0, 2): -23.1965,
                (2, 2, 1, 1, 0): 23.8919,
                (2, 2, 1, 1, 1): 16.7211,
                (2, 2, 1, 1, 2): 18.2259,
                (2, 2, 1, 2, 0): 17.0353,
                (2, 2, 1, 2, 1): 22.2,
                (2, 2, 1, 2, 2): 12.8506,
                (2, 2, 2, 0, 0): -16.5773,
                (2, 2, 2, 0, 1): 11.2873,
                (2, 2, 2, 0, 2): -16.1483,
                (2, 2, 2, 1, 0): 2.8977,
                (2, 2, 2, 1, 1): 7.4012,
                (2, 2, 2, 1, 2): -2.7019,
                (2, 2, 2, 2, 0): -1.7672,
                (2, 2, 2, 2, 1): 15.0718,
                (2, 2, 2, 2, 2): -5.8855}


def run_test():
    for assignment, value in ground_truth.items():
        assert abs(student.evaluate_energy(nodes, edges, assignment) - value) <= 1e-4
    print('Ok')


if __name__ == '__main__':
    run_test()
